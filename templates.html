<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Biblioteca de Templates - Portal SAP</title>
    <link rel="stylesheet" href="estilos.css">
    <style>
        /* Ajustes espec√≠ficos para a navega√ß√£o de abas */
        .tabs-nav-wrapper {
            position: relative;
            z-index: 10;
        }

        .tabs-nav {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: -30px;
            margin-bottom: 40px;
        }
        
        .tab-btn {
            background: white;
            border: 1px solid var(--border);
            padding: 12px 25px;
            border-radius: 30px;
            font-weight: 700;
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
        }
        
        .tab-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 10px 15px rgba(37, 99, 235, 0.2);
        }

        /* √Årea de c√≥digo */
        .code-area {
            background: #0f172a;
            color: #e2e8f0;
            padding: 20px;
            font-family: 'Consolas', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            position: relative;
            border-radius: 0; /* O card cuida do arredondamento superior se necess√°rio, mas aqui fica entre o header e a nota */
        }

        .copy-btn {
            position: absolute;
            top: 15px; right: 15px;
            background: rgba(255,255,255,0.1);
            color: white;
            border: 1px solid rgba(255,255,255,0.2);
            padding: 5px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.8rem;
        }
        .copy-btn:hover { background: rgba(255,255,255,0.2); }

        /* Notas de rodap√© did√°ticas */
        .notes-area {
            padding: 15px 20px;
            background: #fffbeb;
            border-top: 1px solid #fcd34d;
            font-size: 0.9rem;
            color: #92400e;
        }
        
        .notes-error {
            background: #fef2f2;
            color: #991b1b;
            border-top: 1px solid #fecaca;
        }

        /* Caixa de convers√£o 4MDG */
        .funnel-box {
            background: linear-gradient(135deg, #8b5cf6 0%, #6d28d9 100%); /* Roxo Fixo */
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-top: 40px;
            box-shadow: 0 10px 20px rgba(139, 92, 246, 0.2);
        }
        .funnel-btn {
            display: inline-block;
            margin-top: 15px;
            background: white;
            color: #6d28d9; /* Roxo Escuro para contraste com fundo branco */
            padding: 12px 25px;
            border-radius: 30px;
            text-decoration: none;
            font-weight: 700;
            transition: transform 0.2s;
        }
        .funnel-btn:hover { transform: scale(1.05); }

        .template-container { display: none; animation: fadeIn 0.3s ease; }
        .template-container.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <div style="display: flex; align-items: center; gap: 10px;">
            <button class="btn-outline-light" id="menuToggle" style="padding: 8px; display: none;" onclick="toggleSidebar()">
                ‚ò∞
            </button>
            <div class="brand">PORTAL SAP <span>Playbook</span></div>
        </div>
        <div class="header-actions">
             <a href="index.html" class="btn-back">üè† Voltar</a>
        </div>
    </header>

    <div class="sidebar-overlay" id="sidebarOverlay" onclick="toggleSidebar()"></div>

    <div class="workspace">
        <aside id="mainSidebar">
            <div class="history-container">
                <div class="history-header"><span class="history-title">Vistos Recentemente</span><button class="btn-clear-history" onclick="clearHistory()">Limpar</button></div>
                <div id="history-list" class="history-list"></div>
            </div>
            <div class="tree-container">
                <div class="tree-label">Navega√ß√£o</div>
                <div style="margin-left: 0;">
                    <a href="guia_integracao.html" class="node-item"><strong>üó∫Ô∏è Guia de Integra√ß√£o</strong></a>
                    <a href="glossario.html" class="node-item"><strong>üìñ Gloss√°rio</strong></a>
                </div>
            </div>
        </aside>

        <main id="mainContent" style="padding:0;">
            
            <div class="hero hero-purple">
                <h1>Biblioteca de Templates</h1>
                <p>Copie modelos JSON prontos e validados para acelerar sua integra√ß√£o.</p>
            </div>

            <div class="tabs-nav-wrapper">
                <div class="tabs-nav">
                    <button class="tab-btn active" onclick="openTab('clientes')">Clientes</button>
                    <button class="tab-btn" onclick="openTab('fornecedores')">Fornecedores</button>
                    <button class="tab-btn" onclick="openTab('materiais')">Materiais</button>
                </div>
            </div>

            <div style="max-width: 1000px; margin: 0 auto; padding: 0 20px 60px 20px;">

                <!-- ABA: CLIENTES -->
                <div id="clientes" class="template-container active">
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Cliente PJ (Ind√∫stria/Com√©rcio)</h2>
                                <span class="desc">ADRMAS03 + DEBMAS06</span>
                            </div>
                            <span class="badge badge-info">Mercado Nacional</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "ADRMAS03": {
    "E1ADRMAS": {
      "OBJ_TYPE": "KNA1",
      "CONTEXT": "0001",
      "E1BPAD1VL": [{
        "NAME": "IND√öSTRIA MODELO LTDA",
        "STREET": "AVENIDA INDUSTRIAL",
        "HOUSE_NO": "1000",
        "POSTL_COD1": "04578-000",
        "CITY": "SAO PAULO",
        "REGION": "SP",
        "COUNTRY": "BR",
        "LANGU": "P",
        "LANGU_ISO": "PT"
      }],
      "E1BPADSMTP": [{           
        "E_MAIL": "nfe @industriamodelo.com.br"
      }]
    }
  },
  "DEBMAS06": {
    "E1KNA1M": { 
      "KTOKD": "Z001",           
      "LAND1": "BR",
      "NAME1": "IND√öSTRIA MODELO LTDA",
      "STCD1": "12345678000190", 
      "STCD3": "123456789",      
      "STCD4": "98765432",       
      
      "E1KNB1M": [
        {
          "BUKRS": "1000",       
          "AKONT": "11210001",   
          "ZTERM": "Z040",       
          "ZWELS": "E"           
        }
      ],

      "E1KNVVM": [
        {
          "VKORG": "2000",       
          "VTWEG": "20",         
          "SPART": "30",         
          "WAERS": "BRL",
          "ZTERM": "Z040",       
          "VSBED": "01",         
          
          "E1KNVPM": [           
            { "PARVW": "AG", "KUNN2": "10000661", "PARZA": "000" }, 
            { "PARVW": "WE", "KUNN2": "10000661", "PARZA": "000" }
          ],
          
          "E1KNVIM": [           
            { "ALAND": "BR", "TATYP": "IBRX", "TAXKD": "1" }, 
            { "ALAND": "BR", "TATYP": "IPI1", "TAXKD": "1" }
          ]
        }
      ]
    }
  }
}</pre>
                        </div>
                        <div class="notes-area">
                            üí° <strong>Estrutura Hier√°rquica:</strong> Note que <code>AKONT</code> fica dentro de <code>E1KNB1M</code> e n√£o na raiz. Se colocar na raiz (`E1KNA1M`), o IDoc falha ou ignora o dado cont√°bil.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Cliente PF (Consumidor Final)</h2>
                                <span class="desc">Identifica√ß√£o via CPF</span>
                            </div>
                            <span class="badge badge-info">B2C / Varejo</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "ADRMAS03": {
    "E1ADRMAS": {
        "E1BPAD1VL": [{
            "NAME": "SIDNEY CORREIA",
            "CITY": "SAO PAULO",
            "POSTL_COD1": "01005-000",
            "STREET": "RUA BENJAMIM CONSTANT",
            "HOUSE_NO": "10",
            "COUNTRY": "BR",
            "REGION": "SP"
        }]
    }
  },
  "DEBMAS06": {
    "E1KNA1M": {
      "KTOKD": "Z010",           
      "NAME1": "SIDNEY CORREIA",
      "STCD2": "12345678900",    
      "STKZN": "X",              
      "LAND1": "BR",
      
      "E1KNB1M": [
        {
           "BUKRS": "1000",
           "AKONT": "11210002",  
           "ZTERM": "Z001"       
        }
      ],
      
      "E1KNVVM": [
        {
          "VKORG": "2000",
          "VTWEG": "10",         
          "SPART": "30",
          "WAERS": "BRL",
          "E1KNVIM": [
            { "ALAND": "BR", "TATYP": "IBRX", "TAXKD": "0" } 
          ]
        }
      ]
    }
  }
}</pre>
                        </div>
                        <div class="notes-area notes-error">
                            ‚ö†Ô∏è <strong>Erro Comum:</strong> Para Pessoa F√≠sica, o CPF vai no <code>STCD2</code> e o campo <code>STKZN</code> deve ser "X". Se mandar CPF no <code>STCD1</code> (campo de CNPJ), o SAP rejeita por erro de d√≠gito verificador.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Cliente Estrangeiro (Exporta√ß√£o)</h2>
                                <span class="desc">Configura√ß√£o Incoterms</span>
                            </div>
                            <span class="badge badge-warning">Foreign Trade</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "ADRMAS03": {
    "E1ADRMAS": {
      "E1BPAD1VL": [{
        "NAME": "TIMBERLAND US INC",
        "STREET": "BROADWAY",
        "HOUSE_NO": "500",
        "CITY": "NEW YORK",
        "REGION": "NY",          
        "COUNTRY": "US",         
        "LANGU_ISO": "EN"
      }]
    }
  },
  "DEBMAS06": {
    "E1KNA1M": {
      "KTOKD": "Z002",           
      "LAND1": "US",
      "NAME1": "TIMBERLAND US INC",
      
      "E1KNB1M": [
        {
          "BUKRS": "1000",
          "AKONT": "11210003",   
          "ZWELS": "T"           
        }
      ],
      
      "E1KNVVM": [
        {
          "VKORG": "2000",
          "VTWEG": "99",         
          "SPART": "30",
          "WAERS": "USD",        
          "INCO1": "FOB",        
          "INCO2": "NEW YORK",   
          "E1KNVIM": [
            { "ALAND": "BR", "TATYP": "IBRX", "TAXKD": "0" } 
          ]
        }
      ]
    }
  }
}</pre>
                        </div>
                    </div>
                </div>

                <!-- ABA: FORNECEDORES -->
                <div id="fornecedores" class="template-container">
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Fornecedor Nacional PJ (Padr√£o)</h2>
                                <span class="desc">CREMAS06 + Domic√≠lio Fiscal</span>
                            </div>
                            <span class="badge badge-info">Ind√∫stria / Servi√ßos</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "ADRMAS03": {
    "E1ADRMAS": {
      "OBJ_TYPE": "LFA1",
      "CONTEXT": "0001",
      "E1BPAD1VL": [{
        "NAME": "IND√öSTRIA METAL√öRGICA DO SUL LTDA",
        "NAME_2": "FILIAL SC",
        "STREET": "RODOVIA BR 101",
        "HOUSE_NO": "KM 40",
        "POSTL_COD1": "89200-000",
        "CITY": "JOINVILLE",
        "REGION": "SC",
        "COUNTRY": "BR",
        "LANGU": "P",
        "TAXJURCODE": "SC 4209102" 
      }],
      "E1BPADSMTP": [{ "E_MAIL": "vendas @metalurgicasul.com.br" }]
    }
  },
  "CREMAS06": {
    "E1LFA1M": { 
      "KTOKD": "FORN",           
      "NAME1": "IND√öSTRIA METAL√öRGICA DO SUL LTDA",
      "LAND1": "BR",
      "STCD1": "12345678000199", 
      "STCD3": "251234567",      
      "STCD4": "45678901",       
      
      "E1LFB1M": [{
         "BUKRS": "1000",
         "AKONT": "21100001",    
         "ZTERM": "0030",        
         "ZWELS": "F",           
         "FDGRV": "A1"           
      }],

      "E1LFM1M": [{
         "EKORG": "1000",        
         "WAERS": "BRL",
         "WEBRE": "X",           
         "LEBRE": "X",           
         "KALSK": "BR01",        
         "E1WYT3M": [            
            { "PARVW": "LF", "LIFN2": "", "PARZA": "000" }, 
            { "PARVW": "RS", "LIFN2": "", "PARZA": "000" }  
         ]
      }]
    }
  }
}</pre>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Fornecedor Pessoa F√≠sica (Aut√¥nomo)</h2>
                                <span class="desc">Dados Banc√°rios para Transfer√™ncia</span>
                            </div>
                            <span class="badge badge-info">Pagto Transfer√™ncia</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "ADRMAS03": {
    "E1ADRMAS": {
      "OBJ_TYPE": "LFA1",
      "E1BPAD1VL": [{
        "NAME": "MARIA DA SILVA CONSULTORIA",
        "STREET": "RUA DAS FLORES",
        "HOUSE_NO": "123",
        "CITY": "SAO PAULO",
        "POSTL_COD1": "01310-200",
        "REGION": "SP",
        "COUNTRY": "BR"
      }]
    }
  },
  "CREMAS06": {
    "E1LFA1M": {
      "KTOKD": "ZAUT",           
      "NAME1": "MARIA DA SILVA CONSULTORIA",
      "LAND1": "BR",
      "STCD2": "98765432100",    
      "STKZN": "X",              
      
      "E1LFB1M": [{
         "BUKRS": "1000",
         "AKONT": "21100002",    
         "ZTERM": "Z000",        
         "ZWELS": "T",           
         "HBKID": "ITAU"         
      }],

      "E1LFBKM": [{
         "BANKS": "BR",          
         "BANKL": "341",         
         "BANKN": "12345-6",     
         "BKONT": "12",          
         "KOINH": "MARIA DA SILVA" 
      }],

      "E1LFM1M": [{
         "EKORG": "1000",
         "WAERS": "BRL",
         "LEBRE": "X",           
         "WEBRE": ""             
      }]
    }
  }
}</pre>
                        </div>
                        <div class="notes-area">
                            üí∞ <strong>Dados Banc√°rios:</strong> O segmento <code>E1LFBKM</code> √© cr√≠tico para pagamentos via transfer√™ncia (TED/DOC/PIX). O campo <code>KOINH</code> (Titular) deve ser igual ao nome do cadastro para evitar rejei√ß√£o banc√°ria.
                        </div>
                    </div>
                </div>

                <!-- ABA: MATERIAIS -->
                <div id="materiais" class="template-container">
                    
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Material de Consumo / Pe√ßa (Ind√∫stria)</h2>
                                <span class="desc">MATMAS05 + Textos Longos</span>
                            </div>
                            <span class="badge badge-info">Pe√ßa de Reposi√ß√£o</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "MATMAS05": {
    "E1MARAM": [{
      "MATNR": "000000000000111211", 
      "MBRSH": "M",                  
      "MTART": "ERSA",               
      "MEINS": "UN",                 
      "MATKL": "YBR05",              
      "BRGEW": "0.150",              
      "GEWEI": "KG",                 
      "SPART": "05",                 
      "TRAGR": "0001",               
      
      "E1MAKTM": [{
          "MAKTX": "PORCA SEXTAVADA INOX 10MM",
          "SPRAS": "P",
          "SPRAS_ISO": "PT"
      }],

      "E1MARCM": [{
          "WERKS": "1000",           
          "LADGR": "0004",           
          "MTVFP": "DR",             
          "BESKZ": "F",              
          
          "E1MARDM": [{
              "LGORT": "0001"        
          }]
      }],

      "E1MTXHM": [
          {
              "TDOBJECT": "MATERIAL",
              "TDNAME": "000000000000111211", 
              "TDID": "GRUN",                 
              "TDSPRAS": "P",
              "SPRAS_ISO": "PT",
              "E1MTXLM": [
                  { "TDLINE": "PORCA; TIPO: SEXTAVADA; MATERIAL: ACO INOX;" },
                  { "TDLINE": "ROSCA: ASME B1.1; NORMA: DIN 934" }
              ]
          },
          {
              "TDOBJECT": "MATERIAL",
              "TDNAME": "000000000000111211",
              "TDID": "BEST",                 
              "TDSPRAS": "P",
              "SPRAS_ISO": "PT",
              "E1MTXLM": [
                  { "TDLINE": "ATENCAO: EXIGIR CERTIFICADO DE QUALIDADE" }
              ]
          }
      ]
    }]
  }
}</pre>
                        </div>
                        <div class="notes-area">
                            üìù <strong>Textos Longos:</strong> O segmento <code>E1MTXHM</code> fica no mesmo n√≠vel que o <code>E1MAKTM</code>. Use o ID <code>GRUN</code> para textos t√©cnicos gerais e <code>BEST</code> para textos que devem sair impressos no Pedido de Compra.
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <h2>Material de Revenda (Simples)</h2>
                                <span class="desc">Venda e C√≥digo de Barras (EAN)</span>
                            </div>
                            <span class="badge badge-info">Varejo / Retail</span>
                        </div>
                        <div class="code-area">
                            <button class="copy-btn" onclick="copyCode(this)">Copiar</button>
<pre>{
  "MATMAS05": {
    "E1MARAM": [{
      "MATNR": "SKU-500",
      "MTART": "HAWA",           
      "MBRSH": "1",              
      "MEINS": "PC",             
      "EAN11": "7891000200030",  
      
      "E1MAKTM": [{
          "MAKTX": "SMARTPHONE GALAXY 128GB",
          "SPRAS": "P"
      }],
      
      "E1MVEGM": [{
         "VKORG": "2000",        
         "VTWEG": "10"           
      }]
    }]
  }
}</pre>
                        </div>
                    </div>
                </div>

                <div class="funnel-box">
                    <h2>A integra√ß√£o quebrou por dados ruins?</h2>
                    <p style="margin: 15px 0; opacity: 0.9;">
                        Validar se o CNPJ √© v√°lido, se o NCM existe ou se a unidade est√° correta manualmente √© arriscado.
                        <br>O <strong>4MDG</strong> automatiza 100% dessas regras antes do dado chegar ao SAP.
                    </p>
                    <a href="https://4mdg.com.br/" target="_blank" class="funnel-btn">Conhecer Solu√ß√£o de Governan√ßa 4MDG</a>
                </div>

            </div>
        </main>
    </div>

    <div id="toast"></div>

    <style>
        /* Mobile Tweaks */
        @media (max-width: 768px) {
            #menuToggle { display: block !important; }
            
            .tabs-nav-wrapper {
                overflow-x: auto;
                white-space: nowrap;
                padding-bottom: 10px; /* Esconde scrollbar se vis√≠vel */
                margin: -30px 0 20px 0; /* Sobe no Hero */
                -webkit-overflow-scrolling: touch;
            }
            
            .tabs-nav {
                display: inline-flex; /* Permite scroll horizontal */
                padding: 0 20px;
                margin-top: 0;
                justify-content: flex-start; /* Alinha √† esquerda */
            }

            .tab-btn {
                padding: 10px 20px;
                font-size: 0.9rem;
                flex-shrink: 0;
            }

            .hero h1 { font-size: 1.8rem; }
            .hero p { font-size: 1rem; padding: 0 15px; }
            
            /* Ajuste Container */
            div[style*="max-width: 1000px"] {
                padding: 0 10px 60px 10px !important;
            }
            
            .card-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            
            .badge { align-self: flex-start; }
            .copy-btn {
                position: static;
                display: block;
                width: 100%;
                text-align: center;
                margin-bottom: 10px;
            }
        }
    </style>

    <script>
        function toggleSidebar() {
            document.getElementById('mainSidebar').classList.toggle('open');
            document.getElementById('sidebarOverlay').classList.toggle('open');
        }

        function openTab(tabName) {
            document.querySelectorAll('.template-container').forEach(el => el.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(el => el.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            
            const buttons = document.querySelectorAll('.tab-btn');
            if(tabName === 'clientes') buttons[0].classList.add('active');
            if(tabName === 'fornecedores') buttons[1].classList.add('active');
            if(tabName === 'materiais') buttons[2].classList.add('active');
        }

        function copyCode(btn) {
            const pre = btn.nextElementSibling;
            const text = pre.innerText;
            navigator.clipboard.writeText(text).then(() => {
                showToast("‚úÖ Template copiado!");
            });
        }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.innerText = msg;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // --- HIST√ìRICO DE NAVEGA√á√ÉO ---
        (function() {
            const MAX_HISTORY = 10;
            const HISTORY_KEY = 'sap_docs_history';
            if (!window.location.pathname.endsWith('index.html')) {
                const pageTitle = document.title.split('-')[0].trim();
                const currentPage = { title: pageTitle, url: window.location.pathname.split('/').pop() };
                let history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
                history = history.filter(h => h.url !== currentPage.url);
                history.unshift(currentPage);
                if (history.length > MAX_HISTORY) history.pop();
                localStorage.setItem(HISTORY_KEY, JSON.stringify(history));
            }
            const container = document.getElementById('history-list');
            if (container) {
                const history = JSON.parse(localStorage.getItem(HISTORY_KEY) || '[]');
                if (history.length === 0) container.innerHTML = '<div style="padding:5px 12px; font-size:0.75rem; color:#64748b;">Nenhum item recente.</div>';
                else { container.innerHTML = history.map(h => `<a href="${h.url}" class="history-link">${h.title}</a>`).join(''); }
            }
            window.clearHistory = function() { localStorage.removeItem(HISTORY_KEY); if(document.getElementById('history-list')) document.getElementById('history-list').innerHTML = ''; }
        })();
    </script>
</body>
</html>